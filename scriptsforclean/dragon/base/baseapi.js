function call_myswal(){var t=(new SESSION).current(),e=(new HTTP).tagpath("#"+baseController.currentModel.modelName);myswal=swal.mixin({confirmButtonClass:"btn btn-"+COLOR.success,cancelButtonClass:"btn btn-"+COLOR.danger,buttonsStyling:!1,allowOutsideClick:!1,closeOnClickOutside:!1}),SWEETALERT.show({type:"error",title:"Error del Sistema",message:"Ha ocurrido un error no monitoreado. Estaremos restaurando la configuración para que pueda continuar trabajando. Disculpe los inconvenientes ocasionados.",confirm:async function(){SWEETALERT.loading({message:"Refrescando..."}),BASEAPI.mail({to:[t.correo,t.admin_correo],subject:"Error del Sistema",template:"email/plane",fields:{message:`Ha ocurrido un error no monitoreado en la ruta ${e}. El usuario que generó el error fue  ${t.usuario}, el día ${LAN.datetime()}.`}},async function(n){await AUDIT.LOGCUSTOM("Error no monitoreado",baseController.currentModel.tableOrView,{mensaje:`Ha ocurrido un error no monitoreado en la ruta ${e}. El usuario que generó el error fue  ${t.usuario}, el día ${LAN.datetime()}.`}),SWEETALERT.stop(),location.reload()})}})}BASEAPI={ajax:{loading:function(t){t?(new ANIMATION).loadingPure(t,"",t,"30"):SWEETALERT.loading({message:MESSAGE.i("actions.Loading")})},stop:function(t){t?(new ANIMATION).stoploadingPure(t,t):SWEETALERT.stop()},formpost:function(t,e,n){BASEAPI.ajax.loading();var o=$("<form>",{action:t,method:"post"});for(var a in e)o.append($("<input>",{name:a,value:e[a],type:"hidden"}));o.appendTo(document.body).submit(),o.remove(),BASEAPI.ajax.stop(),n()},post:function(t,e,n,o){BASEAPI.ajax.loading(o),$http=angular.injector(["ng"]).get("$http");var a=new HTTP;a.setToken($http),$http.post(t,e).then(function(t){a.evaluate(t),BASEAPI.ajax.stop(o),n(t)},function(t){BASEAPI.ajax.stop(o),console.log(t)})},postp:(t,e,n)=>new Promise((o,a)=>{BASEAPI.ajax.post(t,e,function(t){o(t)},n)}),get:function(t,e,n,o){"notLoad"!=o&&BASEAPI.ajax.loading(o),$http=angular.injector(["ng"]).get("$http");var a=new HTTP;a.setToken($http);var r=a.objToQuery(e);$http.get(t+"?"+r).then(function(t){a.evaluate(t),"notLoad"!=o&&BASEAPI.ajax.stop(o),a.evaluateTokenHTML(t)||n(t)},function(t){"notLoad"!=o&&BASEAPI.ajax.stop(o),console.log(t)})}},csv:function(t,e,n){model;BASEAPI.ajax.post(`${t}_csv`,{tableName:e},function(t){console.log(t)})},list:function(t,e,n){$http=angular.injector(["ng"]).get("$http");var o=new HTTP;o.setToken($http);var a="/api/"+t;0===e.limit&&(e.limit=Number.MAX_SAFE_INTEGER),$http.post(a+"/list",e).then(function(t){if(o.evaluate(t),!o.evaluateTokenHTML(t)){if(void 0===n)return new Promise(function(e,n){e(t.data)});n(t.data)}},function(t){call_myswal(),console.log("Error: "+t)})},listp:(t,e)=>new Promise((n,o)=>{BASEAPI.list(t,e,function(t){n(t)})}),listx:function(t,e,n){$http=angular.injector(["ng"]).get("$http");var o=new HTTP;o.setToken($http);var a="/api/"+t;0===e.limit&&(e.limit=Number.MAX_SAFE_INTEGER),$http.post(a+"/listx",e).then(function(t){if(o.evaluate(t),!o.evaluateTokenHTML(t)){if(void 0===n)return new Promise(function(e,n){e(t.data)});n(t.data)}},function(t){call_myswal(),console.log("Error: "+t)})},first:function(t,e,n){$http=angular.injector(["ng"]).get("$http");var o=new HTTP;o.setToken($http);var a="/api/"+t;0===e.limit&&(e.limit=Number.MAX_SAFE_INTEGER),$http.post(a+"/list",e).then(function(t){o.evaluate(t),o.evaluateTokenHTML(t)||(void 0!==t.data.data?n(t.data.data[0]):n(null))},function(t){call_myswal(),console.log("Error: "+t)})},firstp:(t,e)=>new Promise((n,o)=>{BASEAPI.first(t,e,function(t){n(t)})}),get:function(t,e,n){$http=angular.injector(["ng"]).get("$http");var o=new HTTP;o.setToken($http);var a="/api/"+t;$http.get(a+"/get/"+e).then(function(t){o.evaluate(t),o.evaluateTokenHTML(t)||n(t.data)},function(t){call_myswal(),console.log("Error: "+t)})},getp:(t,e)=>new Promise((n,o)=>{BASEAPI.get(t,e,function(t){n(t)})}),insert:function(t,e,n){$http=angular.injector(["ng"]).get("$http");var o=new HTTP;o.setToken($http);var a="/api/"+t;$http.post(a+"/insert",e).then(function(t){o.evaluate(t),o.evaluateTokenHTML(t)||n(t)},function(t){call_myswal(),console.log("Error: "+t)})},insertp:(t,e)=>new Promise((n,o)=>{BASEAPI.insert(t,e,function(t){n(t)})}),insertID:function(t,e,n,o,a){$http=angular.injector(["ng"]).get("$http");var r=new HTTP;r.setToken($http);var i="/api/"+t,l={};l.insertData=e,l.field=n,l.value=o,$http.post(i+"/insertID",l).then(function(t){r.evaluate(t),r.evaluateTokenHTML(t)||a(t)},function(t){call_myswal(),console.log("Error: "+t)})},insertIDp:(t,e,n,o)=>new Promise((a,r)=>{BASEAPI.insertID(t,e,n,o,function(t){a(t)})}),update:function(t,e,n,o){$http=angular.injector(["ng"]).get("$http");var a=new HTTP;a.setToken($http);var r="/api/"+t;$http.post(r+"/update/"+e,n).then(function(t){a.evaluate(t),a.evaluateTokenHTML(t)||o(t)},function(t){call_myswal(),console.log("Error: "+t)})},updatep:(t,e,n)=>new Promise((o,a)=>{BASEAPI.update(t,e,n,function(t){o(t)})}),updateall:function(t,e,n){$http=angular.injector(["ng"]).get("$http");var o=new HTTP;o.setToken($http);var a="/api/"+t;$http.post(a+"/update",e).then(function(t){o.evaluate(t),o.evaluateTokenHTML(t)||n(t)},function(t){call_myswal(),console.log("Error: "+t)})},updateallp:(t,e)=>new Promise((n,o)=>{BASEAPI.updateall(t,e,function(t){n(t)})}),deleteall:function(t,e,n){$http=angular.injector(["ng"]).get("$http");var o=new HTTP;o.setToken($http);var a="/api/"+t;$http.post(a+"/delete",e).then(function(t){o.evaluate(t),o.evaluateTokenHTML(t)||n(t)},function(t){call_myswal(),console.log("Error: "+t)})},deleteallp:(t,e)=>new Promise((n,o)=>{BASEAPI.deleteall(t,e,function(t){n(t)})}),delete:function(t,e,n){$http=angular.injector(["ng"]).get("$http"),(new HTTP).setToken($http);var o="/api/"+t;$http.delete(o+"/delete/"+e).then(function(t){n(t)},function(t){call_myswal(),console.log("Error: "+t)})},deletep:(t,e)=>new Promise((n,o)=>{BASEAPI.delete(t,e,function(t){n(t)})}),truncate:function(t,e){$http=angular.injector(["ng"]).get("$http"),(new HTTP).setToken($http);var n="/api/"+t;$http.post(n+"/truncate").then(function(t){e(t)},function(t){call_myswal(),console.log("Error: "+t)})},truncatep:t=>new Promise((e,n)=>{BASEAPI.truncate(t,function(t){e(t)})}),mail:function(t,e){$http=angular.injector(["ng"]).get("$http"),(new HTTP).setToken($http);$http.post("/email/send",t).then(function(t){e(t)},function(t){SWEETALERT.stop(),call_myswal(),console.log("Error: "+t)})},mailp:t=>new Promise((e,n)=>{BASEAPI.mail(t,function(t){e(t)})})};
